{% extends "base.html" %} {% block head %}
<title>Task Master</title>
<style>
  .completed {
    text-decoration: line-through;
    color: gray;
  }
</style>
{% endblock %} {% block body %}
<div class="container mt-5">
  <h1 class="mb-4 text-center">📝 Task Master</h1>

  {% if tasks|length < 1 %}
  <div class="alert alert-info text-center">
    No tasks available. Create one below!
  </div>
  {% else %}
  <table class="table table-bordered table-striped text-center align-middle">
    <thead class="table-dark">
      <tr>
        <th>Status</th>
        <th>Task</th>
        <th>Added</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for task in tasks %}
      <tr>
        <td>
          <input
            type="checkbox"
            onchange="location.href='/complete/{{ task.id }}'"
            {%
            if
            task.completed
            %}checked{%
            endif
            %}
          />
        </td>
        <td class="{% if task.completed %}completed{% endif %}">
          {{ task.content }}
        </td>
        <td>{{ task.date_created.strftime('%d-%m-%Y %H:%M:%S') }}</td>
        <td>
          <a href="/update/{{ task.id }}" class="btn btn-sm btn-warning"
            >✏️ Update</a
          >
          <a href="/delete/{{ task.id }}" class="btn btn-sm btn-danger"
            >🗑 Delete</a
          >
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% endif %}

  <!-- Add Task Form -->
  <div class="card shadow-sm mt-4">
    <div class="card-body">
      <form action="/" method="post" class="d-flex gap-2">
        <input
          type="text"
          name="content"
          id="content"
          class="form-control"
          placeholder="Enter your task here"
          required
        />
        <button type="submit" class="btn btn-success">➕ Add Task</button>
      </form>
    </div>
  </div>
</div>
{% endblock %}
